{"ast":null,"code":"const STORAGE_KEY = '__cart';\nlet saveListener = null;\nexport const listen = cb => {\n  saveListener = cb;\n}; // ugly but storage listener is not working for the same window..\n\nexport const list = key => JSON.parse(localStorage.getItem(key || STORAGE_KEY)) || [];\nexport const save = (data, key) => {\n  localStorage.setItem(key || STORAGE_KEY, JSON.stringify(data));\n  if (saveListener) saveListener(list(key || STORAGE_KEY));\n};\nexport const clear = key => {\n  localStorage.removeItem(key || STORAGE_KEY);\n  if (saveListener) saveListener(list(key || STORAGE_KEY));\n};","map":{"version":3,"sources":["/Users/kristoferdei/Documents/Coffee/coffee-frontend/node_modules/cart-localstorage/utils/localstorage.js"],"names":["STORAGE_KEY","saveListener","listen","cb","list","key","JSON","parse","localStorage","getItem","save","data","setItem","stringify","clear","removeItem"],"mappings":"AAAA,MAAMA,WAAW,GAAG,QAApB;AAEA,IAAIC,YAAY,GAAG,IAAnB;AACA,OAAO,MAAMC,MAAM,GAAIC,EAAD,IAAQ;AAAEF,EAAAA,YAAY,GAAGE,EAAf;AAAmB,CAA5C,C,CAA8C;;AAErD,OAAO,MAAMC,IAAI,GAAIC,GAAD,IAASC,IAAI,CAACC,KAAL,CAAWC,YAAY,CAACC,OAAb,CAAqBJ,GAAG,IAAIL,WAA5B,CAAX,KAAwD,EAA9E;AAEP,OAAO,MAAMU,IAAI,GAAG,CAACC,IAAD,EAAON,GAAP,KAAe;AAClCG,EAAAA,YAAY,CAACI,OAAb,CAAqBP,GAAG,IAAIL,WAA5B,EAAyCM,IAAI,CAACO,SAAL,CAAeF,IAAf,CAAzC;AACA,MAAGV,YAAH,EAAiBA,YAAY,CAACG,IAAI,CAACC,GAAG,IAAIL,WAAR,CAAL,CAAZ;AACjB,CAHM;AAKP,OAAO,MAAMc,KAAK,GAAIT,GAAD,IAAS;AAC7BG,EAAAA,YAAY,CAACO,UAAb,CAAwBV,GAAG,IAAIL,WAA/B;AACA,MAAGC,YAAH,EAAiBA,YAAY,CAACG,IAAI,CAACC,GAAG,IAAIL,WAAR,CAAL,CAAZ;AACjB,CAHM","sourcesContent":["const STORAGE_KEY = '__cart'\n\nlet saveListener = null;\nexport const listen = (cb) => { saveListener = cb }; // ugly but storage listener is not working for the same window..\n\nexport const list = (key) => JSON.parse(localStorage.getItem(key || STORAGE_KEY)) || [];\n\nexport const save = (data, key) => {\n\tlocalStorage.setItem(key || STORAGE_KEY, JSON.stringify(data));\n\tif(saveListener) saveListener(list(key || STORAGE_KEY))\n}\n\nexport const clear = (key) => {\n\tlocalStorage.removeItem(key || STORAGE_KEY)\n\tif(saveListener) saveListener(list(key || STORAGE_KEY))\n}\n"]},"metadata":{},"sourceType":"module"}